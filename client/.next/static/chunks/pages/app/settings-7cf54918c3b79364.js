(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[877],{8235:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/settings",function(){return r(8587)}])},2971:function(e,a,r){"use strict";r.d(a,{W:function(){return s}});var t=r(4246);r(7378);var i=r(2924);let s=e=>{let{children:a,className:r="",hover:s=!0,gradient:l=!1,onClick:n,animate:o=!0,delay:d=0}=e,c=["relative backdrop-blur-xl","bg-white/25 dark:bg-gray-800/25","border border-white/20 dark:border-white/10","rounded-xl","shadow-xl","overflow-hidden","transition-all duration-300 ease-out",s&&"hover:shadow-2xl hover:-translate-y-1 hover:bg-white/30 dark:hover:bg-gray-800/30",n&&"cursor-pointer",r].filter(Boolean).join(" "),m=(0,t.jsxs)("div",{className:c,onClick:n,children:[(0,t.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,t.jsx)("div",{className:"absolute -top-1/2 -left-1/2 w-full h-full opacity-10 bg-gradient-to-r from-transparent via-white to-transparent transform rotate-45 translate-x-[-100%]"})}),l&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 via-transparent to-purple-500/10"}),(0,t.jsx)("div",{className:"relative z-10",children:a})]});return o?(0,t.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:d,ease:[.4,0,.2,1]},whileHover:s?{y:-4,scale:1.02}:void 0,whileTap:n?{scale:.98}:void 0,children:m}):m}},8587:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return f}});var t=r(4246),i=r(7378),s=r(2924),l=r(7891);let n=i.forwardRef(function({title:e,titleId:a,...r},t){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),e?i.createElement("title",{id:a},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}),o=i.forwardRef(function({title:e,titleId:a,...r},t){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),e?i.createElement("title",{id:a},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}),d=i.forwardRef(function({title:e,titleId:a,...r},t){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),e?i.createElement("title",{id:a},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))});var c=r(177),m=r(4027),x=r(6522),u=r(6914),h=r(6677),g=r(4250),p=r(2556),b=r(2971),y=r(8748),w=r(5332);function f(){var e;let a=(0,h.useRouter)(),{user:r,organization:f,updateProfile:v,changePassword:k,isAdmin:j,checkTrialStatus:N}=(0,g.a)(),[E,P]=(0,i.useState)("profile"),[C,S]=(0,i.useState)(!1),[A,O]=(0,i.useState)(null),[T,M]=(0,i.useState)({name:(null==r?void 0:r.name)||"",email:(null==r?void 0:r.email)||""}),[z,H]=(0,i.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[L,Z]=(0,i.useState)({name:(null==f?void 0:f.name)||"",settings:(null==f?void 0:f.settings)||{}}),_=N();(0,i.useEffect)(()=>{"billing"===E&&B()},[E]);let B=async()=>{try{let[e,a]=await Promise.all([p.bu.getSubscription(),p.iX.getUsage()]);O({subscription:e.data,usage:a.data})}catch(e){console.error("Failed to load billing info:",e)}},W=async e=>{e.preventDefault();try{S(!0),await v({name:T.name}),w.Am.success("Profile updated successfully")}catch(e){w.Am.error("Failed to update profile")}finally{S(!1)}},R=async e=>{if(e.preventDefault(),z.newPassword!==z.confirmPassword){w.Am.error("Passwords do not match");return}try{S(!0),await k({currentPassword:z.currentPassword,newPassword:z.newPassword}),H({currentPassword:"",newPassword:"",confirmPassword:""}),w.Am.success("Password changed successfully")}catch(e){w.Am.error("Failed to change password")}finally{S(!1)}},U=async e=>{if(e.preventDefault(),!j()){w.Am.error("Only admins can update organization settings");return}try{S(!0),await p.iX.updateSettings(L.settings),w.Am.success("Organization settings updated")}catch(e){w.Am.error("Failed to update organization settings")}finally{S(!1)}},F=async()=>{try{let e=await p.bu.createCheckout({planId:"pro",billingEmail:(null==r?void 0:r.email)||""});window.location.href=e.data.url}catch(e){w.Am.error("Failed to start checkout process")}},D=async()=>{try{let e=await p.bu.createPortalSession();window.location.href=e.data.url}catch(e){w.Am.error("Failed to open billing portal")}},X=[{id:"profile",name:"Profile",icon:l.Z},{id:"password",name:"Password",icon:n},{id:"organization",name:"Organization",icon:o,adminOnly:!0},{id:"billing",name:"Billing",icon:d,adminOnly:!0},{id:"notifications",name:"Notifications",icon:c.Z},{id:"security",name:"Security",icon:m.Z}].filter(e=>!e.adminOnly||j());return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[(0,t.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,t.jsx)("div",{className:"absolute -top-1/2 -right-1/2 w-full h-full bg-gradient-radial from-primary-200/30 via-transparent to-transparent dark:from-primary-900/20"}),(0,t.jsx)("div",{className:"absolute -bottom-1/2 -left-1/2 w-full h-full bg-gradient-radial from-secondary-200/30 via-transparent to-transparent dark:from-secondary-900/20"})]}),(0,t.jsx)("header",{className:"relative z-10 border-b border-white/20 dark:border-white/10 backdrop-blur-xl bg-white/10 dark:bg-gray-800/10",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(s.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a.back(),className:"p-2 rounded-full bg-white/20 dark:bg-gray-800/20 hover:bg-white/30 dark:hover:bg-gray-800/30 transition-colors",children:(0,t.jsx)(x.Z,{className:"w-5 h-5 text-gray-900 dark:text-white"})}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(u.Z,{className:"w-8 h-8 text-gray-700 dark:text-gray-300"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Settings"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your account and organization"})]})]})]}),(0,t.jsx)(y.T,{})]})})}),(0,t.jsx)("main",{className:"relative z-10 max-w-6xl mx-auto px-6 py-8",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,t.jsxs)("div",{className:"lg:w-64 flex-shrink-0",children:[(0,t.jsx)(b.W,{children:(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("nav",{className:"space-y-2",children:X.map(e=>{let a=e.icon;return(0,t.jsxs)(s.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>P(e.id),className:"\n                          w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors\n                          ".concat(E===e.id?"bg-primary-500 text-white":"text-gray-700 dark:text-gray-300 hover:bg-white/50 dark:hover:bg-gray-800/50","\n                        "),children:[(0,t.jsx)(a,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"font-medium",children:e.name})]},e.id)})})})}),_.isTrialActive&&(0,t.jsx)(s.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6",children:(0,t.jsx)(b.W,{children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Trial Status"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:[_.daysLeft," days remaining"]}),(0,t.jsx)(s.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:F,className:"w-full py-2 px-4 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors",children:"Upgrade Now"})]})})})]}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(b.W,{children:(0,t.jsxs)("div",{className:"p-8",children:["profile"===E&&(0,t.jsxs)(s.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Profile Information"}),(0,t.jsxs)("form",{onSubmit:W,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),(0,t.jsx)("input",{type:"text",value:T.name,onChange:e=>M(a=>({...a,name:e.target.value})),className:"w-full px-4 py-3 bg-white/50 dark:bg-gray-800/50 border border-white/20 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900 dark:text-white",placeholder:"Your full name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),(0,t.jsx)("input",{type:"email",value:T.email,disabled:!0,className:"w-full px-4 py-3 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-500 dark:text-gray-400 cursor-not-allowed"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Email cannot be changed. Contact support if needed."})]}),(0,t.jsx)(s.E.button,{type:"submit",disabled:C,whileHover:{scale:1.02},whileTap:{scale:.98},className:"py-3 px-6 bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed",children:C?"Updating...":"Update Profile"})]})]}),"password"===E&&(0,t.jsxs)(s.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Change Password"}),(0,t.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Password"}),(0,t.jsx)("input",{type:"password",value:z.currentPassword,onChange:e=>H(a=>({...a,currentPassword:e.target.value})),className:"w-full px-4 py-3 bg-white/50 dark:bg-gray-800/50 border border-white/20 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900 dark:text-white",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),(0,t.jsx)("input",{type:"password",value:z.newPassword,onChange:e=>H(a=>({...a,newPassword:e.target.value})),className:"w-full px-4 py-3 bg-white/50 dark:bg-gray-800/50 border border-white/20 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900 dark:text-white",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),(0,t.jsx)("input",{type:"password",value:z.confirmPassword,onChange:e=>H(a=>({...a,confirmPassword:e.target.value})),className:"w-full px-4 py-3 bg-white/50 dark:bg-gray-800/50 border border-white/20 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900 dark:text-white",required:!0})]}),(0,t.jsx)(s.E.button,{type:"submit",disabled:C,whileHover:{scale:1.02},whileTap:{scale:.98},className:"py-3 px-6 bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed",children:C?"Changing...":"Change Password"})]})]}),"billing"===E&&(0,t.jsxs)(s.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Billing & Subscription"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"p-6 bg-gradient-to-r from-primary-50 to-secondary-50 dark:from-primary-900/20 dark:to-secondary-900/20 rounded-lg border border-primary-200 dark:border-primary-800",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Current Plan"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400 mb-2",children:(null==f?void 0:f.plan)||"Starter"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Status: ",(null==f?void 0:f.subscriptionStatus)||"Trial"]})]}),(null==A?void 0:A.usage)&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-white/50 dark:bg-gray-800/50 rounded-lg border border-white/20 dark:border-white/10",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Analyses This Month"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:A.usage.analysesThisMonth||0})]}),(0,t.jsxs)("div",{className:"p-4 bg-white/50 dark:bg-gray-800/50 rounded-lg border border-white/20 dark:border-white/10",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rows Processed"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(null===(e=A.usage.rowsProcessed)||void 0===e?void 0:e.toLocaleString())||0})]}),(0,t.jsxs)("div",{className:"p-4 bg-white/50 dark:bg-gray-800/50 rounded-lg border border-white/20 dark:border-white/10",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Team Members"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(null==f?void 0:f.memberCount)||(null==f?void 0:f.maxUsers)||1})]})]}),(0,t.jsx)("div",{className:"flex flex-col sm:flex-row gap-4",children:_.isTrialActive?(0,t.jsx)(s.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:F,className:"py-3 px-6 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg transition-colors",children:"Upgrade to Pro"}):(0,t.jsx)(s.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:D,className:"py-3 px-6 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-lg transition-colors",children:"Manage Billing"})})]})]}),"organization"===E&&(0,t.jsxs)(s.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Organization Settings"}),(0,t.jsxs)("form",{onSubmit:U,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Organization Name"}),(0,t.jsx)("input",{type:"text",value:L.name,onChange:e=>Z(a=>({...a,name:e.target.value})),className:"w-full px-4 py-3 bg-white/50 dark:bg-gray-800/50 border border-white/20 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900 dark:text-white",placeholder:"Organization name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Organization ID"}),(0,t.jsx)("input",{type:"text",value:(null==f?void 0:f.id)||"",disabled:!0,className:"w-full px-4 py-3 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-500 dark:text-gray-400 cursor-not-allowed"})]}),(0,t.jsx)(s.E.button,{type:"submit",disabled:C,whileHover:{scale:1.02},whileTap:{scale:.98},className:"py-3 px-6 bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed",children:C?"Updating...":"Update Organization"})]})]}),"notifications"===E&&(0,t.jsxs)(s.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Notification Preferences"}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Notification settings will be available in a future update."})})]}),"security"===E&&(0,t.jsxs)(s.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Security Settings"}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Advanced security features will be available in a future update."})})]})]})})})]})})]})}},6522:function(e,a,r){"use strict";var t=r(7378);let i=t.forwardRef(function({title:e,titleId:a,...r},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":a},r),e?t.createElement("title",{id:a},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))});a.Z=i},4027:function(e,a,r){"use strict";var t=r(7378);let i=t.forwardRef(function({title:e,titleId:a,...r},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":a},r),e?t.createElement("title",{id:a},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))});a.Z=i},7891:function(e,a,r){"use strict";var t=r(7378);let i=t.forwardRef(function({title:e,titleId:a,...r},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":a},r),e?t.createElement("title",{id:a},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))});a.Z=i}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8235)}),_N_E=e.O()}]);