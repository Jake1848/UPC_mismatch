(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[647],{5610:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/conflicts",function(){return r(2618)}])},2971:function(e,t,r){"use strict";r.d(t,{W:function(){return l}});var a=r(4246);r(7378);var s=r(2924);let l=e=>{let{children:t,className:r="",hover:l=!0,gradient:i=!1,onClick:d,animate:n=!0,delay:c=0}=e,o=["relative backdrop-blur-xl","bg-white/25 dark:bg-gray-800/25","border border-white/20 dark:border-white/10","rounded-xl","shadow-xl","overflow-hidden","transition-all duration-300 ease-out",l&&"hover:shadow-2xl hover:-translate-y-1 hover:bg-white/30 dark:hover:bg-gray-800/30",d&&"cursor-pointer",r].filter(Boolean).join(" "),x=(0,a.jsxs)("div",{className:o,onClick:d,children:[(0,a.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,a.jsx)("div",{className:"absolute -top-1/2 -left-1/2 w-full h-full opacity-10 bg-gradient-to-r from-transparent via-white to-transparent transform rotate-45 translate-x-[-100%]"})}),i&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 via-transparent to-purple-500/10"}),(0,a.jsx)("div",{className:"relative z-10",children:t})]});return n?(0,a.jsx)(s.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:c,ease:[.4,0,.2,1]},whileHover:l?{y:-4,scale:1.02}:void 0,whileTap:d?{scale:.98}:void 0,children:x}):x}},2618:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return R}});var a=r(4246),s=r(7378),l=r(2924),i=r(6522),d=r(6113),n=r(6677),c=r(21),o=r(4092),x=r(9495),h=r(6600),m=r(5083),g=r(2556),u=r(3824),p=r(949),y=r(3862),b=r(4589),f=r(8229),j=r(752),v=r(6431),w=r(7891),N=r(2971),k=r(9720);let E=e=>{let{conflict:t,onClick:r,showAssignment:s=!0,compact:l=!1}=e;return(0,a.jsx)(N.W,{hover:!!r,onClick:r,className:"".concat(l?"p-4":"p-6"," cursor-pointer"),children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(e=>{switch(e){case"CRITICAL":return(0,a.jsx)(d.Z,{className:"w-5 h-5 text-red-500"});case"HIGH":return(0,a.jsx)(p.Z,{className:"w-5 h-5 text-orange-500"});case"MEDIUM":return(0,a.jsx)(y.Z,{className:"w-5 h-5 text-yellow-500"});default:return(0,a.jsx)(y.Z,{className:"w-5 h-5 text-blue-500"})}})(t.severity),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.type.replace(/_/g," ").toLowerCase().replace(/\b\w/g,e=>e.toUpperCase())}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["UPC: ",t.upc]})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full border ".concat((e=>{switch(e){case"CRITICAL":return"bg-red-100 dark:bg-red-900/30 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200";case"HIGH":return"bg-orange-100 dark:bg-orange-900/30 border-orange-200 dark:border-orange-800 text-orange-800 dark:text-orange-200";case"MEDIUM":return"bg-yellow-100 dark:bg-yellow-900/30 border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-200";default:return"bg-blue-100 dark:bg-blue-900/30 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200"}})(t.severity)),children:t.severity})})]}),!l&&(0,a.jsx)("div",{className:"space-y-2",children:t.description&&(0,a.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:t.description})}),t.costImpact&&t.costImpact>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800",children:[(0,a.jsx)(v.Z,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Estimated Cost Impact"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-red-900 dark:text-red-100",children:["$",t.costImpact.toLocaleString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(e=>{switch(e){case"RESOLVED":return(0,a.jsx)(b.Z,{className:"w-4 h-4 text-green-500"});case"IN_PROGRESS":return(0,a.jsx)(f.Z,{className:"w-4 h-4 text-blue-500 animate-pulse"});case"REJECTED":return(0,a.jsx)(j.Z,{className:"w-4 h-4 text-gray-500"});default:return(0,a.jsx)(f.Z,{className:"w-4 h-4 text-yellow-500"})}})(t.status),(0,a.jsx)("span",{className:"font-medium ".concat((e=>{switch(e){case"RESOLVED":return"text-green-600 dark:text-green-400";case"IN_PROGRESS":return"text-blue-600 dark:text-blue-400";case"REJECTED":return"text-gray-600 dark:text-gray-400";default:return"text-yellow-600 dark:text-yellow-400"}})(t.status)),children:t.status.replace(/_/g," ")})]}),s&&(0,a.jsx)("div",{className:"flex items-center space-x-2 text-gray-600 dark:text-gray-400",children:t.assignedTo?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:t.assignedTo.name||t.assignedTo.email})]}):(0,a.jsx)("span",{className:"italic",children:"Unassigned"})})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-500 pt-2 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("span",{children:["Created ",(0,k.Z)(new Date(t.createdAt))," ago"]}),t.resolvedAt&&(0,a.jsxs)("span",{children:["Resolved ",(0,k.Z)(new Date(t.resolvedAt))," ago"]})]}),t.resolutionNotes&&(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-green-800 dark:text-green-200 mb-1",children:"Resolution Notes"}),(0,a.jsx)("p",{className:"text-sm text-green-700 dark:text-green-300",children:t.resolutionNotes})]})]})})};var C=r(5332);let I=e=>{let{analysisId:t,onConflictClick:r,showFilters:i=!0,compact:d=!1}=e,[n,p]=(0,s.useState)([]),[y,b]=(0,s.useState)(!0),[f,j]=(0,s.useState)([]),[v,w]=(0,s.useState)({status:"",severity:"",type:"",assignedTo:"",search:""}),[k,I]=(0,s.useState)({field:"createdAt",direction:"desc"}),[S,R]=(0,s.useState)(!1),A=(0,u.s)();(0,s.useEffect)(()=>(Z(),A.on("conflict:new",T),A.on("conflict:assigned",_),A.on("conflict:resolved",D),()=>{A.off("conflict:new",T),A.off("conflict:assigned",_),A.off("conflict:resolved",D)}),[t,v,k]);let Z=async()=>{try{b(!0);let e={...v,analysisId:t,sortBy:k.field,sortOrder:k.direction},r=await g.A8.getAll(e);p(r.data.conflicts)}catch(e){console.error("Failed to load conflicts:",e),C.Am.error("Failed to load conflicts")}finally{b(!1)}},T=e=>{t&&e.conflict.analysisId!==t||p(t=>[e.conflict,...t])},_=e=>{p(t=>t.map(t=>t.id===e.conflictId?{...t,assignedTo:e.assignedTo}:t))},D=e=>{p(t=>t.map(t=>t.id===e.conflictId?{...t,status:"RESOLVED",resolvedAt:new Date}:t))},O=(e,t)=>{w(r=>({...r,[e]:t}))},L=e=>{I(t=>({field:e,direction:t.field===e&&"asc"===t.direction?"desc":"asc"}))},H=async e=>{if(0!==f.length)try{R(!0),await g.A8.bulkAssign(f,e),j([]),C.Am.success("".concat(f.length," conflicts assigned successfully")),Z()}catch(e){console.error("Bulk assign failed:",e),C.Am.error("Failed to assign conflicts")}finally{R(!1)}},M=e=>{j(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,a.jsxs)("div",{className:"space-y-6",children:[i&&(0,a.jsx)(N.W,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search conflicts...",value:v.search,onChange:e=>O("search",e.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/50 dark:bg-gray-800/50 border border-white/20 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center space-x-4",children:[(0,a.jsxs)("select",{value:v.status,onChange:e=>O("status",e.target.value),className:"px-3 py-2 bg-white/50 dark:bg-gray-800/50 border border-white/20 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-white",children:[(0,a.jsx)("option",{value:"",children:"All Status"}),(0,a.jsx)("option",{value:"PENDING",children:"Pending"}),(0,a.jsx)("option",{value:"IN_PROGRESS",children:"In Progress"}),(0,a.jsx)("option",{value:"RESOLVED",children:"Resolved"}),(0,a.jsx)("option",{value:"REJECTED",children:"Rejected"})]}),(0,a.jsxs)("select",{value:v.severity,onChange:e=>O("severity",e.target.value),className:"px-3 py-2 bg-white/50 dark:bg-gray-800/50 border border-white/20 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-white",children:[(0,a.jsx)("option",{value:"",children:"All Severity"}),(0,a.jsx)("option",{value:"CRITICAL",children:"Critical"}),(0,a.jsx)("option",{value:"HIGH",children:"High"}),(0,a.jsx)("option",{value:"MEDIUM",children:"Medium"}),(0,a.jsx)("option",{value:"LOW",children:"Low"})]}),(0,a.jsxs)("button",{onClick:()=>L("createdAt"),className:"flex items-center space-x-1 px-3 py-2 bg-white/50 dark:bg-gray-800/50 border border-white/20 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-white hover:bg-white/60 dark:hover:bg-gray-800/60 transition-colors",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Sort"})]})]})]}),f.length>0&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-4 flex items-center justify-between p-3 bg-primary-50 dark:bg-primary-900/20 rounded-lg border border-primary-200 dark:border-primary-800",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-primary-800 dark:text-primary-200",children:[f.length," conflicts selected"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(l.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(),disabled:S,className:"flex items-center space-x-1 px-3 py-1 bg-primary-600 hover:bg-primary-700 text-white rounded-md text-sm disabled:opacity-50",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Assign to Me"})]}),(0,a.jsx)("button",{onClick:()=>j([]),className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Clear"})]})]})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[!d&&n.length>0&&(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)("button",{onClick:()=>{j(f.length===n.length?[]:n.map(e=>e.id))},className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded border-2 ".concat(f.length===n.length?"bg-primary-600 border-primary-600":"border-gray-300 dark:border-gray-600"," flex items-center justify-center"),children:f.length===n.length&&(0,a.jsx)(m.Z,{className:"w-3 h-3 text-white"})}),(0,a.jsxs)("span",{children:["Select All (",n.length,")"]})]})}),y&&(0,a.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(N.W,{children:(0,a.jsx)("div",{className:"p-6 animate-pulse",children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-gray-200 dark:bg-gray-700 rounded"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]}),(0,a.jsx)("div",{className:"w-16 h-6 bg-gray-200 dark:bg-gray-700 rounded"})]})})},t))}),!y&&0===n.length&&(0,a.jsx)(N.W,{children:(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)(m.Z,{className:"w-16 h-16 text-green-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No conflicts found"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:Object.values(v).some(e=>e)?"Try adjusting your filters to see more results.":"Great! No conflicts detected in your data."})]})}),(0,a.jsx)(c.M,{children:n.map((e,t)=>(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.05*t},className:"relative",children:[!d&&(0,a.jsx)("button",{onClick:()=>M(e.id),className:"absolute top-4 left-4 z-10",children:(0,a.jsx)("div",{className:"w-4 h-4 rounded border-2 ".concat(f.includes(e.id)?"bg-primary-600 border-primary-600":"border-gray-300 dark:border-gray-600"," flex items-center justify-center"),children:f.includes(e.id)&&(0,a.jsx)(m.Z,{className:"w-3 h-3 text-white"})})}),(0,a.jsx)("div",{className:d?"":"ml-6",children:(0,a.jsx)(E,{conflict:e,onClick:()=>null==r?void 0:r(e),compact:d})})]},e.id))})]})]})};var S=r(8748);function R(){let e=(0,n.useRouter)(),[t,r]=(0,s.useState)(null);return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[(0,a.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute -top-1/2 -right-1/2 w-full h-full bg-gradient-radial from-primary-200/30 via-transparent to-transparent dark:from-primary-900/20"}),(0,a.jsx)("div",{className:"absolute -bottom-1/2 -left-1/2 w-full h-full bg-gradient-radial from-secondary-200/30 via-transparent to-transparent dark:from-secondary-900/20"})]}),(0,a.jsx)("header",{className:"relative z-10 border-b border-white/20 dark:border-white/10 backdrop-blur-xl bg-white/10 dark:bg-gray-800/10",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(l.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e.back(),className:"p-2 rounded-full bg-white/20 dark:bg-gray-800/20 hover:bg-white/30 dark:hover:bg-gray-800/30 transition-colors",children:(0,a.jsx)(i.Z,{className:"w-5 h-5 text-gray-900 dark:text-white"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(d.Z,{className:"w-8 h-8 text-red-600 dark:text-red-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"UPC Conflicts"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and resolve data conflicts"})]})]})]}),(0,a.jsx)(S.T,{})]})})}),(0,a.jsx)("main",{className:"relative z-10 max-w-7xl mx-auto px-6 py-8",children:(0,a.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,a.jsx)(I,{onConflictClick:t=>{r(t),e.push("/app/conflicts/".concat(t.id))}})})})]})}}},function(e){e.O(0,[411,511,774,888,179],function(){return e(e.s=5610)}),_N_E=e.O()}]);