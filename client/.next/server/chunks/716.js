exports.id=716,exports.ids=[716],exports.modules={9951:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.d(t,{L:()=>w});var i=s(997);s(6689);var o=s(6197),r=s(9894),n=s.n(r),c=s(6677),l=s(6111),d=s(8110),u=s(6113),h=s(8272),m=s(92),p=s(149),g=s(6914),b=s(6498),f=s(8733),x=s(177),y=s(4250),v=s(1352),k=e([o,y,v]);[o,y,v]=k.then?(await k)():k;let j=[{name:"Dashboard",href:"/app/enhanced-dashboard",icon:l.Z},{name:"Upload",href:"/app/upload",icon:d.Z},{name:"Conflicts",href:"/app/conflicts",icon:u.Z},{name:"AI Analysis",href:"/app/ai-analysis",icon:h.Z},{name:"Reports",href:"/app/reports",icon:m.Z},{name:"Team",href:"/app/team",icon:p.Z},{name:"Settings",href:"/app/settings",icon:g.Z}];function w({children:e}){let t=(0,c.useRouter)(),{user:s,logout:a}=(0,y.a)();return(0,i.jsxs)("div",{className:"min-h-screen bg-background",children:[i.jsx("div",{className:"fixed left-0 top-0 h-full w-64 bg-card border-r border-border z-40",children:(0,i.jsxs)("div",{className:"flex flex-col h-full",children:[i.jsx("div",{className:"p-6 border-b border-border",children:(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsxs)("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg blur-sm opacity-50"}),i.jsx("div",{className:"relative w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:i.jsx(h.Z,{className:"w-6 h-6 text-white"})})]}),(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"UPC Resolver"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"AI-Powered"})]})]})}),i.jsx("nav",{className:"flex-1 p-4 space-y-2",children:j.map(e=>{let s=t.pathname===e.href;return(0,i.jsxs)(n(),{href:e.href,className:`flex items-center space-x-3 px-4 py-3 rounded-lg transition-all group ${s?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,children:[i.jsx(e.icon,{className:`w-5 h-5 ${s?"text-white":"group-hover:text-foreground"}`}),i.jsx("span",{className:"font-medium",children:e.name})]},e.name)})}),(0,i.jsxs)("div",{className:"p-4 border-t border-border",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:i.jsx(b.Z,{className:"w-5 h-5 text-white"})}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:s?.name}),i.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s?.email})]})]}),(0,i.jsxs)("button",{onClick:a,className:"flex items-center space-x-3 w-full px-4 py-3 rounded-lg text-destructive hover:bg-destructive/10 transition-all",children:[i.jsx(f.Z,{className:"w-5 h-5"}),i.jsx("span",{className:"font-medium",children:"Logout"})]})]})]})}),(0,i.jsxs)("div",{className:"pl-64",children:[i.jsx("header",{className:"sticky top-0 z-30 backdrop-blur-xl bg-background/80 border-b border-border",children:(0,i.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[i.jsx("div",{className:"flex items-center space-x-4",children:i.jsx("h1",{className:"text-xl font-semibold text-foreground",children:j.find(e=>e.href===t.pathname)?.name||"Dashboard"})}),(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 w-64 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"}),i.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:i.jsx("svg",{className:"w-4 h-4 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),i.jsx(v.T,{}),(0,i.jsxs)("button",{className:"relative p-2 text-muted-foreground hover:text-foreground hover:bg-accent rounded-lg transition-colors",children:[i.jsx(x.Z,{className:"w-5 h-5"}),i.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]})]})]})}),i.jsx("main",{className:"p-6",children:i.jsx(o.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e})})]})]})}a()}catch(e){a(e)}})},1352:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.d(t,{T:()=>d});var i=s(997);s(6689);var o=s(6197),r=s(9685),n=s(4674),c=s(2765),l=e([o]);o=(l.then?(await l)():l)[0];let d=()=>{let{theme:e,toggleTheme:t}=(0,c.F)();return(0,i.jsxs)(o.motion.button,{onClick:t,className:"relative flex items-center justify-center w-12 h-12 rounded-full bg-white/20 dark:bg-gray-800/20 backdrop-blur-md border border-white/20 dark:border-white/10 hover:bg-white/30 dark:hover:bg-gray-800/30 transition-all duration-300",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Toggle theme",children:[i.jsx(o.motion.div,{initial:!1,animate:{rotate:"dark"===e?180:0,opacity:1},transition:{duration:.3,ease:"easeInOut"},className:"relative w-6 h-6",children:"light"===e?i.jsx(r.Z,{className:"w-6 h-6 text-yellow-500"}):i.jsx(n.Z,{className:"w-6 h-6 text-blue-300"})}),i.jsx(o.motion.div,{className:"absolute inset-0 rounded-full",animate:{boxShadow:"dark"===e?"0 0 20px rgba(59, 130, 246, 0.3)":"0 0 20px rgba(245, 158, 11, 0.3)"},transition:{duration:.3}})]})};a()}catch(e){a(e)}})},723:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.d(t,{H:()=>l});var i=s(997),o=s(6689),r=s(6677),n=s(648),c=e([n]);n=(c.then?(await c)():c)[0];let d=(0,o.createContext)(void 0);function l({children:e}){let[t,s]=(0,o.useState)(null),[a,c]=(0,o.useState)(!0),l=(0,r.useRouter)();(0,o.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=localStorage.getItem("token");if(e){let e=await n.iJ.getProfile();s(e.data)}}catch(e){localStorage.removeItem("token")}finally{c(!1)}},h=async(e,t)=>{try{let a=await n.iJ.login({email:e,password:t});localStorage.setItem("token",a.data.token),s(a.data.user),l.push("/app/enhanced-dashboard")}catch(e){throw e}},m=async e=>{try{let t=await n.iJ.register(e);localStorage.setItem("token",t.data.token),s(t.data.user),l.push("/app/enhanced-dashboard")}catch(e){throw e}};return i.jsx(d.Provider,{value:{user:t,login:h,register:m,logout:()=>{localStorage.removeItem("token"),s(null),l.push("/auth/login")},isLoading:a},children:e})}a()}catch(e){a(e)}})},4250:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.d(t,{a:()=>d});var i=s(6689),o=s(6677),r=s(6201),n=s(648),c=s(7973),l=e([r,n,c]);[r,n,c]=l.then?(await l)():l;let d=()=>{let e=(0,o.useRouter)(),t=(0,c.s)(),[s,a]=(0,i.useState)({user:null,organization:null,loading:!0,isAuthenticated:!1});(0,i.useEffect)(()=>{let e=localStorage.getItem("auth_token");e?l():a(e=>({...e,loading:!1}))},[]);let l=(0,i.useCallback)(async()=>{try{let e=await n.iJ.getProfile(),{user:s,organization:i}=e.data;a({user:s,organization:i,loading:!1,isAuthenticated:!0}),(0,n.hq)(i.id);let o=localStorage.getItem("auth_token");o&&t.connect(o)}catch(e){console.error("Failed to load profile:",e),(0,n.H6)(),a({user:null,organization:null,loading:!1,isAuthenticated:!1})}},[t]),d=async s=>{try{a(e=>({...e,loading:!0}));let i=await n.iJ.login(s),{token:o,user:c,organization:l}=i.data;(0,n.uB)(o),(0,n.hq)(l.id),a({user:c,organization:l,loading:!1,isAuthenticated:!0}),t.connect(o),r.toast.success("Logged in successfully!"),e.push("/app/dashboard")}catch(t){a(e=>({...e,loading:!1}));let e=t.response?.data?.message||"Login failed";throw r.toast.error(e),t}},u=async s=>{try{a(e=>({...e,loading:!0}));let i=await n.iJ.register(s),{token:o,user:c,organization:l}=i.data;(0,n.uB)(o),(0,n.hq)(l.id),a({user:c,organization:l,loading:!1,isAuthenticated:!0}),t.connect(o),r.toast.success("Account created successfully!"),e.push("/app/dashboard")}catch(t){a(e=>({...e,loading:!1}));let e=t.response?.data?.message||"Registration failed";throw r.toast.error(e),t}},h=async()=>{try{await n.iJ.logout()}catch(e){console.error("Logout error:",e)}finally{(0,n.H6)(),t.disconnect(),a({user:null,organization:null,loading:!1,isAuthenticated:!1}),r.toast.success("Logged out successfully"),e.push("/auth/login")}},m=async e=>{try{let t=await n.iJ.updateProfile(e),s=t.data.user;return a(e=>({...e,user:s})),r.toast.success("Profile updated successfully"),s}catch(t){let e=t.response?.data?.message||"Failed to update profile";throw r.toast.error(e),t}},p=async e=>{try{await n.iJ.changePassword(e),r.toast.success("Password changed successfully")}catch(t){let e=t.response?.data?.message||"Failed to change password";throw r.toast.error(e),t}},g=async e=>{try{let t=await n.iJ.inviteUser(e);return r.toast.success("User invited successfully"),t.data}catch(t){let e=t.response?.data?.message||"Failed to invite user";throw r.toast.error(e),t}},b=e=>!!s.user&&e.includes(s.user.role);return{...s,login:d,register:u,logout:h,updateProfile:m,changePassword:p,inviteUser:g,hasRole:b,isAdmin:()=>b(["ADMIN"]),isAnalyst:()=>b(["ADMIN","ANALYST"]),checkTrialStatus:()=>{if(!s.organization)return{isTrialActive:!1,daysLeft:0,shouldShowWarning:!1};let e="TRIAL"===s.organization.subscriptionStatus;if(!e||!s.organization.trialEndsAt)return{isTrialActive:!1,daysLeft:0,shouldShowWarning:!1};let t=new Date,a=new Date(s.organization.trialEndsAt),i=a.getTime()-t.getTime(),o=Math.ceil(i/864e5);return{isTrialActive:!0,daysLeft:Math.max(0,o),shouldShowWarning:o<=7&&o>0}},refetch:l}};a()}catch(e){a(e)}})},2765:(e,t,s)=>{"use strict";s.d(t,{F:()=>o});var a=s(6689);let i=(0,a.createContext)(void 0),o=()=>{let e=(0,a.useContext)(i);return e||r()},r=()=>{let[e,t]=(0,a.useState)("light");(0,a.useEffect)(()=>{let e=localStorage.getItem("theme");if(e)t(e),document.documentElement.classList.toggle("dark","dark"===e);else{let e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";t(e),document.documentElement.classList.toggle("dark","dark"===e)}},[]);let s=e=>{t(e),localStorage.setItem("theme",e),document.documentElement.classList.toggle("dark","dark"===e)};return{theme:e,setTheme:s,toggleTheme:()=>{s("light"===e?"dark":"light")}}};i.Provider},2716:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>d});var i=s(997),o=s(6677),r=s(6201),n=s(723),c=s(9951);s(2563);var l=e([r,n,c]);[r,n,c]=l.then?(await l)():l;let u=["/auth/login","/auth/register","/"];function d({Component:e,pageProps:t}){let s=(0,o.useRouter)(),a=u.includes(s.pathname);return i.jsx(n.H,{children:(0,i.jsxs)("div",{className:"min-h-screen",children:[a?i.jsx(e,{...t}):i.jsx(c.L,{children:i.jsx(e,{...t})}),i.jsx(r.Toaster,{position:"top-right",toastOptions:{duration:4e3,style:{background:"hsl(var(--card))",color:"hsl(var(--card-foreground))",border:"1px solid hsl(var(--border))"}}})]})})}a()}catch(e){a(e)}})},648:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.d(t,{A8:()=>d,H6:()=>p,ZJ:()=>l,bu:()=>h,hq:()=>g,iJ:()=>c,iX:()=>u,uB:()=>m});var i=s(9648),o=s(6201),r=e([i,o]);[i,o]=r.then?(await r)():r;let n=i.default.create({baseURL:"http://localhost:5000",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=localStorage.getItem("auth_token");t&&(e.headers.Authorization=`Bearer ${t}`);let s=localStorage.getItem("organization_id");return s&&(e.headers["X-Organization-Id"]=s),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>(e.response?.status===401?(localStorage.removeItem("auth_token"),localStorage.removeItem("organization_id"),window.location.href="/auth/login"):(e.response?.status===403&&o.toast.error("Access denied. Please check your permissions."),e.response?.status>=500&&o.toast.error("Server error. Please try again later.")),Promise.reject(e)));let c={register:e=>n.post("/api/auth/register",e),login:e=>n.post("/api/auth/login",e),logout:()=>n.post("/api/auth/logout"),getProfile:()=>n.get("/api/auth/me"),updateProfile:e=>n.patch("/api/auth/me",e),changePassword:e=>n.post("/api/auth/change-password",e),inviteUser:e=>n.post("/api/auth/invite",e)},l={getAll:e=>n.get("/api/analyses",{params:e}),getById:e=>n.get(`/api/analyses/${e}`),upload:(e,t)=>{let s=new FormData;return s.append("file",e),t&&s.append("settings",JSON.stringify(t)),n.post("/api/analyses/upload",s,{headers:{"Content-Type":"multipart/form-data"}})},updateColumnMapping:(e,t)=>n.patch(`/api/analyses/${e}/mapping`,{columnMapping:t}),delete:e=>n.delete(`/api/analyses/${e}`)},d={getAll:e=>n.get("/api/conflicts",{params:e}),getById:e=>n.get(`/api/conflicts/${e}`),assign:(e,t)=>n.patch(`/api/conflicts/${e}/assign`,{assignedToId:t}),updateStatus:(e,t)=>n.patch(`/api/conflicts/${e}/status`,t),bulkAssign:(e,t)=>n.post("/api/conflicts/bulk-assign",{conflictIds:e,assignedToId:t}),getStats:()=>n.get("/api/conflicts/stats/summary")},u={get:()=>n.get("/api/organizations"),updateSettings:e=>n.patch("/api/organizations/settings",{settings:e}),getMembers:()=>n.get("/api/organizations/members"),updateMemberRole:(e,t)=>n.patch(`/api/organizations/members/${e}/role`,{role:t}),deactivateMember:e=>n.patch(`/api/organizations/members/${e}/deactivate`),reactivateMember:e=>n.patch(`/api/organizations/members/${e}/reactivate`),getUsage:()=>n.get("/api/organizations/usage")},h={getSubscription:()=>n.get("/api/billing/subscription"),createCheckout:e=>n.post("/api/billing/checkout",e),handleCheckoutSuccess:e=>n.post("/api/billing/checkout/success",{sessionId:e}),createPortalSession:()=>n.post("/api/billing/portal"),cancelSubscription:e=>n.post("/api/billing/cancel",{reason:e}),reactivateSubscription:()=>n.post("/api/billing/reactivate")},m=e=>{localStorage.setItem("auth_token",e)},p=()=>{localStorage.removeItem("auth_token"),localStorage.removeItem("organization_id")},g=e=>{localStorage.setItem("organization_id",e)};a()}catch(e){a(e)}})},7973:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.d(t,{s:()=>l});var i=s(4612),o=s(6201),r=e([i,o]);[i,o]=r.then?(await r)():r;class n{connect(e){this.socket?.connected||(this.token=e,this.socket=(0,i.io)("http://localhost:5000",{auth:{token:e},transports:["websocket"],upgrade:!1}),this.setupEventListeners())}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null),this.listeners.clear()}setupEventListeners(){this.socket&&(this.socket.on("connect",()=>{console.log("WebSocket connected"),this.reconnectAttempts=0,this.emit("connected",{connected:!0})}),this.socket.on("disconnect",e=>{console.log("WebSocket disconnected:",e),this.emit("disconnected",{connected:!1,reason:e}),"io server disconnect"===e&&this.attemptReconnect()}),this.socket.on("connect_error",e=>{console.error("WebSocket connection error:",e),this.emit("error",{error:e.message}),this.attemptReconnect()}),this.socket.on("analysis:progress",e=>{this.emit("analysis:progress",e)}),this.socket.on("analysis:complete",e=>{this.emit("analysis:complete",e),o.toast.success("Analysis completed successfully!")}),this.socket.on("conflict:new",e=>{this.emit("conflict:new",e),("CRITICAL"===e.conflict.severity||"HIGH"===e.conflict.severity)&&o.toast.error(`New ${e.conflict.severity.toLowerCase()} conflict detected!`)}),this.socket.on("conflict:assigned",e=>{this.emit("conflict:assigned",e),(0,o.toast)("You have been assigned a new conflict",{icon:"ℹ️"})}),this.socket.on("conflict:resolved",e=>{this.emit("conflict:resolved",e),o.toast.success("Conflict has been resolved")}),this.socket.on("team:notification",e=>{this.emit("team:notification",e)}),this.socket.on("team:activity",e=>{this.emit("team:activity",e)}),this.socket.on("system:notification",e=>{this.emit("system:notification",e),"error"===e.severity?o.toast.error(e.message):"warning"===e.severity?o.toast.error(e.message,{duration:6e3}):(0,o.toast)(e.message)}),this.socket.on("subscription:update",e=>{this.emit("subscription:update",e),o.toast.success(e.message)}),this.socket.on("notification",e=>{switch(this.emit("notification",e),e.type){case"analysis_complete":o.toast.success("Analysis completed!");break;case"trial_expiring":o.toast.error(e.message,{duration:1e4});break;default:if(e.severity)switch(e.severity){case"error":o.toast.error(e.message);break;case"warning":o.toast.error(e.message,{duration:6e3});break;case"success":o.toast.success(e.message);break;default:(0,o.toast)(e.message)}}}),this.socket.on("pong",e=>{this.emit("pong",e)}))}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnection attempts reached"),o.toast.error("Connection lost. Please refresh the page.");return}this.reconnectAttempts++;let e=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);setTimeout(()=>{this.token&&(console.log(`Attempting to reconnect... (${this.reconnectAttempts}/${this.maxReconnectAttempts})`),this.connect(this.token))},e)}subscribeToAnalysis(e){this.socket?.connected&&this.socket.emit("subscribe:analysis",e)}unsubscribeFromAnalysis(e){this.socket?.connected&&this.socket.emit("unsubscribe:analysis",e)}subscribeToConflicts(){this.socket?.connected&&this.socket.emit("subscribe:conflicts")}unsubscribeFromConflicts(){this.socket?.connected&&this.socket.emit("unsubscribe:conflicts")}subscribeToTeam(){this.socket?.connected&&this.socket.emit("subscribe:team")}on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}off(e,t){this.listeners.has(e)&&this.listeners.get(e).delete(t)}emit(e,t){this.listeners.has(e)&&this.listeners.get(e).forEach(e=>{try{e(t)}catch(e){console.error("Error in WebSocket event callback:",e)}})}ping(){this.socket?.connected&&this.socket.emit("ping")}isConnected(){return this.socket?.connected||!1}getConnectionId(){return this.socket?.id}constructor(){this.socket=null,this.token=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.listeners=new Map}}let c=new n,l=()=>({connect:e=>c.connect(e),disconnect:()=>c.disconnect(),isConnected:()=>c.isConnected(),subscribeToAnalysis:c.subscribeToAnalysis.bind(c),unsubscribeFromAnalysis:c.unsubscribeFromAnalysis.bind(c),subscribeToConflicts:c.subscribeToConflicts.bind(c),unsubscribeFromConflicts:c.unsubscribeFromConflicts.bind(c),subscribeToTeam:c.subscribeToTeam.bind(c),on:c.on.bind(c),off:c.off.bind(c),ping:c.ping.bind(c)});a()}catch(e){a(e)}})},2563:()=>{}};